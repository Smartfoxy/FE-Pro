<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM</title>

    <style>
        .square-blue {
            background: blue;
        }
        .square-green {
            background: green;
        }
        .square-yellow {
            background: yellow;
        }
    
    </style>
</head>

<body>

    <div class="container"></div>

    <div class="box shadow radius"></div>

    <script>
        "use strict"

        let $container = document.querySelector('.container');
        
        $container.innerHTML = createSquares(5);       

        let squares = document.querySelectorAll('.square'); 

        squares.forEach(function(el) {
            el.addEventListener("click", changeColorOfSquare);
            el.addEventListener("click", function() {
                $container.append(this);
            })
        });

        function createSquares(num) {
            let style = "width: 50px; height: 50px; text-align: center; line-height:50px; border: 1px solid black; float: left; margin-right: 20px;"
            let inner = '';
            for(let i = 1; i <= 5; i++) {
                inner += `<div class = "square" style = "${style}">${i}</div>`;
            }
            return inner;
        } 

        function changeColorOfSquare(event) {
            if(event.target.classList.contains('square-blue')){  /*правильно ли здесь указывать this? не до конца понимаю как оно срабатывает??очень похоже на случайность)))*/
                this.classList.remove('square-blue');
                this.classList.add('square-green');
            } else if(this.classList.contains('square-green')){
                this.classList.remove('square-green');
                this.classList.add('square-yellow');
            }else if(this.classList.contains('square-yellow')){
                this.classList.remove('square-yellow');
                this.classList.add('square-blue');
            } else {
                this.classList.add('square-blue');
            }
        }



        const $task_2 = document.querySelector('.box');

        toggleClass($task_2, 'border');
        console.log($task_2.className);

        toggleClass($task_2, 'border');
        console.log($task_2.className);
        

        function toggleClass(elem, cl){ 
            let classList = elem.className.split(' ');
            let index = classList.indexOf(cl);
            if(index >= 0){
                classList.splice(index, 1);
            }else {
                classList.push(cl);
            }
            elem.className = classList.join(' ');
        }

        

        
    </script>
</body>

</html>