<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lesson_21</title>
    <style>
        
    </style>

</head>

<body>
    

    <script>
        "use strict"

       const menu = {
           burger: [
                {
                    name: 'burg',
                    time: 2000
                },
                {
                    name: 'potato',
                    time: 1000
                }
           ],
           pizza: [
               {
                    name: 'piz',
                    time: 2000
               }
           ],
           hotDog: [
               {
                    name: 'hot',
                    time: 1000
               }
           ]
       };
       
       const order = function(menu) {
           console.log('start cooking...');

           const cookFood = function(menuItem) {
               
               return new Promise(function(resolve, reject) {
                    setTimeout(function() {
                        if(1) {
                            resolve(menuItem.name);
                        } else {
                            reject(menuItem.name)
                        }

                    }, menuItem.time)
                  
               })
            };

            return Promise.allSettled(menu.map(cookFood));
       }    

       order(menu.burger).then(function(res){
           console.log(res);
       })


      /* function willGetNewPhone() {
           const resultGood = Math.floor(Math.random() * (12) + 1);

           return new Promise(function(resolve, reject) {
               if(resultGood > 8) {
                   const phone = {
                       brand: 'Apple',
                       model: '11'
                   }
                   resolve(phone);
               } else {
                   const reason = new Error('You have bad markes');
                   reject(reason);
               }
           })
       }

       willGetNewPhone()
            .then(function(phone){
                console.log(`Look at my ${phone.brand} ${phone.model}`);
            })
            .catch(function(reason) {
                console.log(reason);
            }) 
            .finally(function() {
                console.log('Q is over');
            })*/



       /*const promise = new Promise(function(resolve, reject) {
           setTimeout(function(){
               if(1) {
                  resolve('Hello promise!')
               } else {
                  reject('Hello error:') 
               }
           }, 0) 
       });

       promise
            .then(function(res) {
                console.log(res);
            })
            .then */

      /* const order = function(menuName, oncomplete) {
           console.log('start cooking food...');

           console.log('menuName', menuName);

           const res = [];

           function getResultData(data) {
               res.push(data);
               if(res.length === menuName.length) {
                 oncomplete('finished: ', res);
               }
              
           }

           menuName.forEach(foodItem => {
               cookFood(foodItem, getResultData);
            });


           function cookFood(food, callback){
               const condition = true;

               setTimeout(() => {
                if(condition) {
                   const cookResult = {
                       value: food.name, 
                       status: 'fulfild'
                   }
                   callback(cookResult);
               } else {
                  const cookResult = {
                       value: food.name,
                       status: 'rejected'
                   }
                   callback(cookResult);
               }

               }, food.time)    
           }
           
       }

       console.log(order(menu.burger, console.log));*/

     



        




    </script>
</body>

</html>